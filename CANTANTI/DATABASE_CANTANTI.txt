SET NOCOUNT ON
SET DATEFORMAT dmy

USE master
GO

IF EXISTS(SELECT name FROM dbo.sysdatabases WHERE name = 'Cantanti')
	DROP DATABASE [Cantanti]
GO

CREATE DATABASE [Cantanti]
GO

USE [Cantanti]
GO

CREATE TABLE CANTANTE(
	nomeCantante VARCHAR(50) PRIMARY KEY,
	genere VARCHAR(50) NOT NULL,
	dataNascita DATE NOT NULL
)
GO

CREATE TABLE COMPETIZIONE(
	numComp VARCHAR(50) NOT NULL,
	annoEdizione INT NOT NULL,
	luogo VARCHAR(50),
	presentatore VARCHAR(50),
	PRIMARY KEY(numComp,annoEdizione)
)
GO

CREATE TABLE ISCRITTO(
	cod INT IDENTITY PRIMARY KEY,
	numComp VARCHAR(50) NOT NULL,
	annoEdizione INT NOT NULL,
	nomeCantante VARCHAR(50) NOT NULL,
	posizione INT,
	FOREIGN KEY (nomeCantante) REFERENCES CANTANTE(nomeCantante),
	FOREIGN KEY (numComp,annoEdizione) REFERENCES COMPETIZIONE(numComp,annoEdizione)
)
GO


INSERT INTO CANTANTE VALUES('Robert Plant','ROCK','01-01-1988')
INSERT INTO CANTANTE VALUES('Freddie Mercury','ROCK','01-01-1994')
INSERT INTO CANTANTE VALUES('Paul Rodgers','ROCK','01-01-1987')
INSERT INTO CANTANTE VALUES('Ian Gillan','ROCK','01-01-1987')

INSERT INTO CANTANTE VALUES('Chef Ragoo','RAP','01-01-1984')
INSERT INTO CANTANTE VALUES('DJ Lugi','RAP','01-01-1984')
INSERT INTO CANTANTE VALUES('Don Joe','RAP','01-01-1982')
INSERT INTO CANTANTE VALUES('DrefGold','RAP','01-01-1982')
INSERT INTO CANTANTE VALUES('YOUNG SIGNORINO','RAP','06-06-1996')


INSERT INTO COMPETIZIONE VALUES('Sanremo','2015','SANREMO','MORANDI')
INSERT INTO COMPETIZIONE VALUES('Sanremo','2016','SANREMO','MORANDI')
INSERT INTO COMPETIZIONE VALUES('FESTIVALBAR','2014','ROMA','AMADEUS')
INSERT INTO COMPETIZIONE VALUES('FESTIVALBAR','2013','MILANO','AMADEUS')
INSERT INTO COMPETIZIONE VALUES('WIND MUSIC','2016','BOLOGNA','BONOLIS')
INSERT INTO COMPETIZIONE VALUES('WIND MUSIC','2015','GENOVA','BONOLIS')


INSERT INTO ISCRITTO VALUES('SANREMO','2015','Robert Plant',1)
INSERT INTO ISCRITTO VALUES('SANREMO','2015','Freddie Mercury',2)
INSERT INTO ISCRITTO VALUES('SANREMO','2015','Chef Ragoo',4)
INSERT INTO ISCRITTO VALUES('SANREMO','2015','DJ Lugi',3)

INSERT INTO ISCRITTO VALUES('SANREMO','2016','Don Joe',1)
INSERT INTO ISCRITTO VALUES('SANREMO','2016','DJ Lugi',2)
INSERT INTO ISCRITTO VALUES('SANREMO','2016','Don Joe',4)
INSERT INTO ISCRITTO VALUES('SANREMO','2016','YOUNG SIGNORINO',null)
INSERT INTO ISCRITTO VALUES('SANREMO','2016','DrefGold',5)


INSERT INTO ISCRITTO VALUES('FESTIVALBAR','2014','Robert Plant',1)
INSERT INTO ISCRITTO VALUES('FESTIVALBAR','2014','Freddie Mercury',2)
INSERT INTO ISCRITTO VALUES('FESTIVALBAR','2014','Paul Rodgers',3)
INSERT INTO ISCRITTO VALUES('FESTIVALBAR','2014','Chef Ragoo',null)
INSERT INTO ISCRITTO VALUES('FESTIVALBAR','2014','DrefGold',null)

INSERT INTO ISCRITTO VALUES('FESTIVALBAR','2013','Freddie Mercury',3)
INSERT INTO ISCRITTO VALUES('FESTIVALBAR','2013','Paul Rodgers',2)
INSERT INTO ISCRITTO VALUES('FESTIVALBAR','2013','DrefGold',1)

INSERT INTO ISCRITTO VALUES('WIND MUSIC','2015','Robert Plant',3)
INSERT INTO ISCRITTO VALUES('WIND MUSIC','2015','Freddie Mercury',1)
INSERT INTO ISCRITTO VALUES('WIND MUSIC','2015','Paul Rodgers',2)

INSERT INTO ISCRITTO VALUES('WIND MUSIC','2016','DrefGold',3)
INSERT INTO ISCRITTO VALUES('WIND MUSIC','2016','Freddie Mercury',2)
INSERT INTO ISCRITTO VALUES('WIND MUSIC','2016','Paul Rodgers',1)
INSERT INTO ISCRITTO VALUES('WIND MUSIC','2016','DrefGold',null)